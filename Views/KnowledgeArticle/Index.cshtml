@model List<StockGTO.Models.ArticlePost>
@{
    ViewData["Title"] = "股票知識教學";
    Layout = "~/Views/Shared/_AzNewsLayout.cshtml";
    var keyword = Context.Request.Query["keyword"].ToString();
    var category = Context.Request.Query["category"].ToString();
}
<main class="container pt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">📘 股票知識教學（後台）</h2>
    </div>

    <!-- 🔍 搜尋列 -->
    <form method="get" class="row g-2 mb-4">
        <div class="col-md-5">
            <input type="text" name="keyword" value="@keyword" class="form-control" placeholder="🔍 搜尋文章標題" />
        </div>
        <div class="col-md-4">
            <select name="category" class="form-select">
                <option value="">-- 所有分類 --</option>
                <option value="股票知識" selected="@(category == "股票知識" ? "selected" : null)">股票知識</option>
                <option value="ETF專區" selected="@(category == "ETF專區" ? "selected" : null)">ETF專區</option>
                <option value="技術分析" selected="@(category == "技術分析" ? "selected" : null)">技術分析</option>
            </select>
        </div>
        <div class="col-md-3">
            <button type="submit" class="btn btn-danger w-100">搜尋</button>
        </div>
    </form>

    <!-- 📊 表格模式 -->
    <div class="table-responsive mb-5">
        <table class="table table-striped table-hover align-middle text-dark">
            <thead class="table-light">
                <tr>
                    <th>#</th>
                    <th>文章標題</th>
                    <th>作者</th>
                    <th>發佈日期</th>
                    <th>分類</th>
                    <th style="width: 120px;" class="text-end">操作</th>
                </tr>
            </thead>
            <tbody>
                @for (int i = 0; i < Model.Count; i++)
                {
                    var item = Model[i];
                    <tr>
                        <td>@(i + 1)</td>
                        <td>@item.Title</td>
                        <td>@item.Author</td>
                        <td>@item.CreatedAt.ToString("yyyy-MM-dd")</td>
                        <td>@item.Category</td>
                        <td class="text-end text-nowrap" style="font-size: 0.9rem;">
                            <a asp-action="Details" asp-route-id="@item.Id" class="text-primary me-2">檢視</a>
                            <a asp-action="Edit" asp-route-id="@item.Id" class="text-warning me-2">編輯</a>
                            <a asp-action="Delete" asp-route-id="@item.Id" class="text-danger"
                               onclick="return confirm('確定要刪除這篇文章嗎？')">刪除</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</main>
